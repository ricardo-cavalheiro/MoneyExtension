name: Build, Test and Deploy Package - Staging

on:
  push:
    branches: [ "staging", "production" ]

jobs:
  Build:
    uses: ./.github/workflows/build.yml
  Test:
    needs: Build
    uses: ./.github/workflows/test.yml
  Deploy:
    needs: Test
    uses: ./.github/workflows/deploy.yml
    with:
      package-path: ${{ needs.Test.outputs.package-path }}